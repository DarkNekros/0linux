#!/bin/sh
#
# /etc/rc.d/rc.4 : ce fichier est exécuté lors du passage en mode multi-
# utilisateur avec X par init(8) (donc dans le niveau d'exécution 4).
# Très lourdement inspiré de Slackware.

echo "Démarrage du gestionnaire de connexion graphique..."

# D'abord GDM - s'il est présent, c'est qu'on veut l'utiliser par défaut :
if [ -x /usr/bin/gdm -o -x /usr/sbin/gdm ]; then
  gdm -nodaemon
fi

# Sinon, KDM. S'il y est, on veut sûrement l'utiliser par défaut :
if [ -x /opt/kde/bin/kdm -o -x /usr/bin/kdm ]; then
	kdm -nodaemon
fi

# Sinon, SliM :
if [ -x /usr/bin/slim -o -x /usr/sbin/slim ]; then
	slim
fi

# Sinon, XDM :
if [ -x /usr/bin/xdm -o -x /usr/X11R6/bin/xdm ]; then
	xdm -nodaemon
fi

# Aucun ?
echo "Oups ! Ni GDM, ni KDM, ni SLiM, ni XDM ne sont installés ! Le niveau"
echo "d'exécution 4 nécessite au moins un gestionnaire de connexion. "
echo "Retour au niveau d'exécution 3..."
sleep 3
telinit 3

# C'est fini !
